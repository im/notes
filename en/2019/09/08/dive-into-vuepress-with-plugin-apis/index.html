<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dive into VuePress with Plugin APIs | Billy Chin</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="alternate" type="application/rss+xml" href="https://billyyyyy3320.com/rss.xml" title="Billy Chin RSS Feed">
    <meta name="description" content="The most important change in VuePress 1.x is Pluggable. It flashed on my mind that if I figure out the execution sequence of all the plugin APIs and what is really executed, maybe it&#39;s a special approach to understand the ins and outs of how VuePress works.">
    
    <link rel="preload" href="/notes/assets/css/0.styles.dd430f05.css" as="style"><link rel="preload" href="/notes/assets/js/app.58d3274d.js" as="script"><link rel="preload" href="/notes/assets/js/10.1c61ee65.js" as="script"><link rel="preload" href="/notes/assets/js/9.1e39f892.js" as="script"><link rel="preload" href="/notes/assets/js/12.0d6e1e2a.js" as="script"><link rel="preload" href="/notes/assets/js/1.cefec5dd.js" as="script"><link rel="preload" href="/notes/assets/js/5.32c25227.js" as="script"><link rel="preload" href="/notes/assets/js/11.dc79e7dc.js" as="script"><link rel="prefetch" href="/notes/assets/js/13.62a57153.js"><link rel="prefetch" href="/notes/assets/js/14.37f3d230.js"><link rel="prefetch" href="/notes/assets/js/15.79885d8b.js"><link rel="prefetch" href="/notes/assets/js/16.e4cd4d03.js"><link rel="prefetch" href="/notes/assets/js/17.775f6e6c.js"><link rel="prefetch" href="/notes/assets/js/18.33771f84.js"><link rel="prefetch" href="/notes/assets/js/19.28476f19.js"><link rel="prefetch" href="/notes/assets/js/20.d0956512.js"><link rel="prefetch" href="/notes/assets/js/21.d2a932b5.js"><link rel="prefetch" href="/notes/assets/js/22.b61847dc.js"><link rel="prefetch" href="/notes/assets/js/23.e85806c4.js"><link rel="prefetch" href="/notes/assets/js/24.3bc4fa61.js"><link rel="prefetch" href="/notes/assets/js/25.fe29317a.js"><link rel="prefetch" href="/notes/assets/js/26.9b23ff55.js"><link rel="prefetch" href="/notes/assets/js/4.9634bdd5.js"><link rel="prefetch" href="/notes/assets/js/6.1bb32538.js"><link rel="prefetch" href="/notes/assets/js/7.d71d51da.js"><link rel="prefetch" href="/notes/assets/js/8.01f3078f.js"><link rel="prefetch" href="/notes/assets/js/vuejs-paginate.bcf40e38.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.dd430f05.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/notes/" class="nav-link home-link">Billy Chin </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/notes/zh/" class="nav-link">部落格</a></li><li class="nav-item"><a href="/notes/en/" class="nav-link router-link-active">Blog</a></li><li class="nav-item"><a href="https://github.com/billyyyyy3320" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/notes/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/notes/" class="nav-link mobile-home-link">Billy Chin </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/notes/zh/" class="nav-link">部落格</a></li><li class="mobile-nav-item"><a href="/notes/en/" class="nav-link router-link-active">Blog</a></li><li class="mobile-nav-item"><a href="https://github.com/billyyyyy3320" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li> <li class="mobile-nav-item"><a href="/notes/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div class="diagram-post-wrapper"><div class="content__diagram" style="display:none;"><p><img src="/notes/assets/img/lifecycle.931bdddc.png" alt="VuePress lifecycle"></p></div> <div class="diagram-controller"><label class="vue-switcher vue-switcher--unchecked vue-switcher--bold vue-switcher--bold--unchecked vue-switcher-theme--custom vue-switcher-color--default"><!----> <input type="checkbox"> <div></div></label></div> <div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Dive into VuePress with Plugin APIs
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2019-09-08T00:00:00.000Z">
      Sun Sep 08 2019
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/notes/tag/Vue" data-v-42ccfcd5><span data-v-42ccfcd5>Vue</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/notes/tag/VuePress" data-v-42ccfcd5><span data-v-42ccfcd5>VuePress</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/notes/tag/JavaScript" data-v-42ccfcd5><span data-v-42ccfcd5>JavaScript</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p><a href="/notes/zh/2019/09/08/dive-into-vuepress-with-plugin-apis/">繁體中文</a> | English</p> <h2 id="plugin"><a href="#plugin" class="header-anchor">#</a> Plugin ???</h2> <p>The most important change in VuePress 1.x is <code>Pluggable</code>. VP has a lot of core functions implemented by plugins, and offers many <a href="https://v1.vuepress.vuejs.org/plugin/option-api.html" target="_blank" rel="noopener noreferrer">options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for developer to build their plugins. Moreover, <code>.vuepress/config.js</code> and <code>theme/index.js</code> are also plugins.</p> <p>It flashed on my mind that if I figure out the execution sequence of all the plugin APIs and what is really executed, maybe it's a special approach to understand the ins and outs of how VP works.</p> <h3 id="warm-up"><a href="#warm-up" class="header-anchor">#</a> Warm up</h3> <p>First, let's check out all the plugin options:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// hooks</span>
ready
generated
<span class="token comment">// options</span>
chainWebpack
extendMarkdown
chainMarkdown
enhanceAppFiles
extendPageData
clientDynamicModules
clientRootMixin
additionalPages
globalUIComponents
define
alias
extendCli
beforeDevServer
afterDevServer
</code></pre></div><p>I've created a diagram to show the whole life-cycle. There's a switch button at header. You can simply click it and the diagram might show up. Note that it is scrollable. Hope it will be a useful reference.</p> <h3 id="how-do-plugins-work"><a href="#how-do-plugins-work" class="header-anchor">#</a> How do plugins work</h3> <p>All the plugin options will be in initialized at the beginning. They all have their own class. You can take a look at <code>@vuepress/core/lib/node/plugin-api/abstract</code>. Later, whenever VP get the plugin config, it'll push them into each corresponding option. And at the timing you saw in my diagram, they will be executed.</p> <h2 id="prepare"><a href="#prepare" class="header-anchor">#</a> Prepare</h2> <p>We all know VP can be started by <code>vuepress dev</code> or <code>vuepress build</code>. No matter triggered by which one, it has to enter this process. (Btw, I call it <code>Prepare</code> because the function which handle this process in VuePress 0.x is named <code>prepare</code>)</p> <h3 id="markdown"><a href="#markdown" class="header-anchor">#</a> Markdown</h3> <p>Suppose you have already known VP uses <a href="https://github.com/markdown-it/markdown-it" target="_blank" rel="noopener noreferrer">Markdown-it<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as the Markdown renderer.</p> <p>The first two APIs in the life-cycle are:</p> <ul><li><code>chainMarkdown</code></li></ul> <blockquote><p>Edit the internal Markdown config with markdown-it-chain —— A chaining API like webpack-chain but for markdown-it.</p></blockquote> <ul><li><code>extendMarkdown</code></li></ul> <blockquote><p>A function to edit default config or apply extra plugins to the markdown-it instance used to render source files.</p></blockquote> <p>First, VP has to create markdown config. VP leverages <a href="https://github.com/ulivz/markdown-it-chain" target="_blank" rel="noopener noreferrer">markdown-it-chain<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which is developed directly on the basis of webpack-chain. In the config, VP will add a bunch of markdown-it plugins (most of them is created by VP).</p> <p>Then, VP is going to run the plugin API <code>chainMarkdown</code> which is going to config markdown-it as the same way above. After markdown-it-chain created a markdown-it instance with all the above configuration, VP starts to run <code>extendMarkdown</code>.</p> <p>Those impressive features about writing Markdown might be accomplished here, such as <code>Custom Containers</code> which offers shortcuts to create beautiful UI components, <code>Internal Links</code> converted to <code>&lt;router-link&gt;</code> for SPA navigation, <a href="https://v1.vuepress.vuejs.org/guide/markdown.html" target="_blank" rel="noopener noreferrer">etc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="pages"><a href="#pages" class="header-anchor">#</a> Pages</h3> <p>The next APIs I'm going to talk about are:</p> <ul><li><code>extendPageData</code></li></ul> <blockquote><p>A function used to extend or edit the $page object. This function will be invoking once for each page at compile time.</p></blockquote> <ul><li><code>additionalPages</code></li></ul> <blockquote><p>Add a page pointing to a Markdown file.</p></blockquote> <p>Finding all page source files located in sourceDir, VP is going to resolve them. It generates the page title and headers, resolves frontmatters, and so on. This information is saved for rendering later.</p> <p>VP will run <code>extendPageData</code> after each page is processed. After all of that, It's time to run <code>additionalPages</code>. The pages added by <code>additionalPages</code> will be resolve as the same way, so <code>extendPageData</code> will also be invoked.</p> <h3 id="ready"><a href="#ready" class="header-anchor">#</a> Ready</h3> <p>There're five options in this section:</p> <ul><li><code>ready</code></li></ul> <blockquote><p>The ready hook is executed after the application is initialized and before some specific functional APIs are executed.</p></blockquote> <ul><li><code>clientDynamicModules</code></li></ul> <blockquote><p>Generate some client modules at compile time.</p></blockquote> <ul><li><code>clientRootMixin</code></li></ul> <blockquote><p>A path to the mixin file which allows you to control the lifecycle of root component.</p></blockquote> <ul><li><code>enhanceAppFiles</code></li></ul> <blockquote><p>This option accepts absolute file path(s) pointing to the enhancement file(s), or a function that returns the path(s), which allows you to do some App Level Enhancements.</p></blockquote> <ul><li><code>globalUIComponents</code></li></ul> <blockquote><p>Inject some global UI fixed somewhere on the page.</p></blockquote> <p>VP will run <code>ready</code> after pages are resolved. You might be interested to know <a href="https://v1.vuepress.vuejs.org/config/#styling" target="_blank" rel="noopener noreferrer">styling<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is completed by an internal plugin which leverages <code>ready</code>.</p> <p>Next, run <code>clientDynamicModules</code> the option used most often by internal plugins. That's why we can access <a href="https://v1.vuepress.vuejs.org/guide/global-computed.html#global-computed" target="_blank" rel="noopener noreferrer">Global Computed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, use SPA navigation without manual configuration of Vue router paths and how page components or layout components be imported. Moreover, the following option <code>clientRootMixin</code> is also handled by <code>clientDynamicModules</code>. It'll generate some temp files so that VuePress client can use them. You can simply open <code>@vuepress/core/.temp</code> and check it out.</p> <p><code>enhanceAppFiles</code> and <code>globalUIComponents</code> are processed by a similar way. VuePress client will do some App Level Enhancements and register those UI components by the temp files generated by them.</p> <p>The next following things VP will do depends on which command you actually run.</p> <h2 id="custom-commands"><a href="#custom-commands" class="header-anchor">#</a> Custom commands</h2> <ul><li><code>extendCli</code></li></ul> <blockquote><p>Register a extra command to enhance the CLI of VuePress. The function will be called with a <a href="https://github.com/cacjs/cac" target="_blank" rel="noopener noreferrer">CAC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>'s instance as the first argument.</p></blockquote> <p>VP leverages <a href="https://github.com/cacjs/cac" target="_blank" rel="noopener noreferrer">CAC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to build its Command-line Interface. Before CAC parses the arguments, VP will check node version, register <a href="https://v1.vuepress.vuejs.org/api/cli.html#command-line-interface" target="_blank" rel="noopener noreferrer">core commands<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and handle unknown commands which is included your custom command.</p> <p>Note that you have to tell VP where's your source files, e.g. <code>vuepress hello docs</code>. VP has to run all I've just mentioned <a href="#prepare">earlier</a>, otherwise it can't access <code>extendCli</code>.</p> <h2 id="dev"><a href="#dev" class="header-anchor">#</a> Dev</h2> <h3 id="create-webpack-config"><a href="#create-webpack-config" class="header-anchor">#</a> Create webpack config</h3> <p>VP split out webpack config into three files: base, client and server. Kind of similar to what <a href="https://ssr.vuejs.org/guide/build-config.html#build-configuration" target="_blank" rel="noopener noreferrer">Vue SSR Guide suggest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It'll invoke the function to create base config no matter it's creating client or server config.</p> <p>We only need to care client config in this section:
<img src="/notes/assets/img/dev-progress.6767c48b.png" alt="VuePress dev progress">
Let's take a look at the relevant options:</p> <ul><li><code>define</code></li></ul> <blockquote><p>VuePress opened up a concise define option, note that the values has been automatically processed by JSON.stringify.</p></blockquote> <ul><li><code>alias</code></li></ul> <blockquote><p>The way to set aliases more like configuration than via <code>chainWebpack</code>.</p></blockquote> <ul><li><code>chainWebpack</code></li></ul> <blockquote><p>Edit the internal webpack config with webpack-chain.</p></blockquote> <p>VP is going to do a lot of things in webpack config. I'd like to mention there's a markdown loader in VP which
transforms <code>.md</code> file into Vue single-file component. Since all <code>.md</code> files are SFC, it can be handled by Vue loader.</p> <p>Of course, VP will also create global constants and set alias at compile time. Global constants are defined for such as debugging, etc. Its relevant API <code>define</code> is actually used by many official plugins. When processing client, VP benefits from aliases, such as accessing those temp files generated by <code>clientDynamicModules</code>.</p> <p>In the end of creating client config, VP run <code>chainWebpack</code> which offers the last chance to make the last config.</p> <h3 id="dev-server"><a href="#dev-server" class="header-anchor">#</a> Dev server</h3> <p>VP leverages <a href="https://github.com/webpack/webpack-dev-server" target="_blank" rel="noopener noreferrer">webpack-dev-server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to handle development.</p> <ul><li><code>beforeDevServer</code></li></ul> <blockquote><p>Equivalent to before in webpack-dev-server. You can use it to define custom handlers before all middleware is executed.</p></blockquote> <ul><li><code>afterDevServer</code></li></ul> <blockquote><p>Equivalent to after in webpack-dev-server. You can use it to execute custom middleware after all other middleware.</p></blockquote> <p>Whenever a source file is added or removed, config or frontmatters are changed, VuePress will rerun <a href="#prepare">Prepare</a> to reach real hot-reload.
Source files and config are watched by <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noopener noreferrer">chokidar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. In the other hand, watching frontmatters are handled by the markdown loader I mentioned before.</p> <h2 id="build"><a href="#build" class="header-anchor">#</a> Build</h2> <h3 id="create-webpack-config-2"><a href="#create-webpack-config-2" class="header-anchor">#</a> Create webpack config</h3> <p>Unlike <a href="#dev">Dev</a>, in this section, we do care both client and server config:</p> <p><img src="/notes/assets/img/build-progress.b92bf9ca.png" alt="VuePress build progress"></p> <p>Those options executed by creating client config are also executed by creating server config, so we're not going to discuss them again, you can take a look at <a href="#create-webpack-config">the previous section</a>.</p> <p>But there's some different config between <code>Build</code> and <code>Dev</code>. The most important thing is using Vue SSR client and server plugin. It'll generate manifest files which provide information for rendering.</p> <h3 id="generate-pages"><a href="#generate-pages" class="header-anchor">#</a> Generate pages</h3> <p>The last option:</p> <ul><li><code>generated</code></li></ul> <blockquote><p>Called when a (production) build finishes, with an array of generated page HTML paths.</p></blockquote> <p>What to be generate has been prepared <a href="#pages">earlier</a>. But before generating, VP will add a 404 page if it doesn't exist. It means VP will also run <code>extendPageData</code>.</p> <p>When generating each file, VP will invoke <a href="https://ssr.vuejs.org/api/#createbundlerenderer" target="_blank" rel="noopener noreferrer">createBundleRenderer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which helps VP render HTML with those manifest files. Further infos, please head to <a href="https://ssr.vuejs.org/api/" target="_blank" rel="noopener noreferrer">Vue SSR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Those manifest files will be removed very soon after use. That's why you've never seen them in your output folder.</p> <p>When everything is done, VP run <code>generated</code>.✌️</p> <h2 id="wrap-up"><a href="#wrap-up" class="header-anchor">#</a> Wrap up</h2> <p>So, this approach really led me from beginning to end. Although it may not cover every concept, it saved me from thinking where should I start? Hope it can help you get clear about VP or feel more comfortable to dive into the source code.</p></div> <footer><form class="newsletter"><div class="newsletter__wrap"><div class="newsletter__title">Newsletter</div> <div class="newsletter__content">Subscribe to get my latest content. No spam.</div> <div class="newsletter__fields"><input type="email" name="email" aria-label="Email" placeholder="Email" required="required" autocapitalize="off" autocorrect="off" data-cy="email" value="" class="newsletter__input"> <button type="submit" data-cy="submit" class="newsletter__button">
        Subscribe
      </button></div></div></form> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#plugin" title="Plugin ???">Plugin ???</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#warm-up" title="Warm up">Warm up</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#how-do-plugins-work" title="How do plugins work">How do plugins work</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#prepare" title="Prepare">Prepare</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#markdown" title="Markdown">Markdown</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#pages" title="Pages">Pages</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#ready" title="Ready">Ready</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#custom-commands" title="Custom commands">Custom commands</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#dev" title="Dev">Dev</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#create-webpack-config" title="Create webpack config">Create webpack config</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#dev-server" title="Dev server">Dev server</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#build" title="Build">Build</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#create-webpack-config-2" title="Create webpack config">Create webpack config</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#generate-pages" title="Generate pages">Generate pages</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#wrap-up" title="Wrap up">Wrap up</a></div></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/billyyyyy3320" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="mailto:newsbielt703@gmail.com" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-3d9deeb8><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-3d9deeb8></path><polyline points="22,6 12,13 2,6" data-v-3d9deeb8></polyline></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>Billy Chin © 2019</li></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/notes/assets/js/app.58d3274d.js" defer></script><script src="/notes/assets/js/10.1c61ee65.js" defer></script><script src="/notes/assets/js/9.1e39f892.js" defer></script><script src="/notes/assets/js/12.0d6e1e2a.js" defer></script><script src="/notes/assets/js/1.cefec5dd.js" defer></script><script src="/notes/assets/js/5.32c25227.js" defer></script><script src="/notes/assets/js/11.dc79e7dc.js" defer></script>
  </body>
</html>
