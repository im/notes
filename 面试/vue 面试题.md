# vue 面试题 



#### v-if和v-for哪个优先级更高？如果两个同时出现，应该怎么优化得到更好的性能？

1. v-for 优先于 v-if 被解析
2. 如果出现同时出现，每次渲染都会先执行循环再判断，无论如何循环都不可避免，浪费了性能
3. 要避免出现这种情况，则可以在外层嵌套 template，在这一层进行v-if判断，然后在内部进行v-for循环



#### Vue组件data为什么必须是个函数而Vue的根实例则没有此限制？

vue组件可能存在多个实例，如果使用对象形式定义data， 则会导致他们共用一个data对象，那么状态变更将影响所有组件的实列，这是不合理的，采用函数形式定义，在initData时会将其作为工厂函数返回全新data对象，规避多实例之间状态污染问题。而在vue根实例创建过程中则不存在该限制，也是因为根实例只能有一个，不用担心这种情况



#### 你知道vue中key的作用和工作原理吗？说说你对它的理解。

1. key的作用主要是为了高效的更新虚拟DOM，其原理是vue在patch过程中通过key可以精准的判断两个节点是同一个，从而避免频繁更新不同元素，使得整个patch过程更加高效，减少DOM操作量，提高性能
2. 另外，若不设值key还可能在列表更新时引发一些隐蔽bug
3. vue中在使用相同标签名元素的过渡切换时，也会使用到key的属性，其目的也是为了让vue可以区分它们，vue只会替换其内部属性而不会触发过渡效果



#### 你怎么理解vue中的diff算法？

1. diff 算法是虚拟DOM技术的必然产物，通过新旧虚拟DOM作对比（既diff）,将变化的地方更新在真实DOM上，另外，也需要diff高效的执行对比过程，从而降低时间复杂度为O(n)
2. vue2.x中降低了Watcher粒度，每个组件只有一个Watcher与之对应，只有引入diff才能精确找到发生变化的地方
3. vue中diff执行的时刻是组件实例执行更新函数时，它会比对上一次渲染结果oldVnode和新的渲染结果newVnode，此过程称为patch
4. diff过程整体遵循深度优先，同层比较的策略，两个节点之间比较会根据他们是否拥有子节点或者文本节点做不同的操作；比较两组子节点是算法的终点，首先假设头尾节点可能相同做4次比对尝试，如果没有找到相同节点才按通用方式遍历查找，查找结束再按情况处理剩下的节点，借助key通常可以非常精确找到相同节点，因此整个patch过程非常高效

#### 谈一谈对vue组件化的理解？

1. 组件是独立和可复用的代码组织单元，组件系统是vue核心特性质疑，它使开发者使用小型、独立和通常可复用的组件构建大应用
2. 组件化开发能大幅提高应用开发效率、测试性、复用性等
3. 组件使用按分类有：页面组件、业务组件、通用组件
4. vue的组件是基本配置，我们通常编写的组件是组件配置而非组件，框架后续会生成其构造函数，他们基于VueComponent，扩展于Vue
5. vue中常见组件化技术有;属于prop，自定义事件，插槽等，他们主要用于组件通信，扩展等
6. 合理的划分组件，有助于提升应用性能
7. 组件应该是高内聚，低耦合
8. 遵循单向数据流原则

#### 谈一谈对vue设计原则的理解？



在vue的 [官网](https://cn.vuejs.org/v2/guide/) 写着定义的特点：

- 渐进式javascript框架
- 易用、灵活和高效



###### 渐进式javascript框架

与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与[现代化的工具链](https://cn.vuejs.org/v2/guide/single-file-components.html)以及各种[支持类库](https://github.com/vuejs/awesome-vue#libraries--plugins)结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。

###### 易用性

vue提供数据响应式，声明式模板语法和基于配置的组件系统等核心特性，这些使我们只需要关注应用的核心业务即可，只要会写js、html和css就能轻松编写vue应用



###### 灵活性

渐进式框架最大的有点就是灵活性，如果应用足够小，我们可能仅需要vue核心特性即可完成功能，随着应用的规模不断亏大，我们才可能逐渐引入路由、状态管理、`vue-cli ` 等库和工具，不管是应用体积还是学习难度都是一个逐渐增加的平和曲线

###### 高效性

超快的虚拟 `DOM` 和 `diff` 算法使我们的应用拥有最佳的性能表现

追求高效的过程还在继续，`vue3` 中引入 `Proxy` 对数据响应式改进以及编译器中对于静态内容编译的改进都会让 vue 更加高效

