---
title: 区块链&比特币
---

# 区块链 & 比特币


## 比特币的诞生？

2008年爆发全球金融危机，2008年11月1日，一个自称中本聪（Satoshi Nakamoto）的人在[P2P foundation](https://p2pfoundation.net/)网站上发布了比特币白皮书 **《比特币：一种点对点的电子现金系统》** 比特币就此面世

2009年1月3日，中本聪把自己的思考落地，他在赫尔辛基的一个服务器上创建、编译、打包了第一份开源代码；18时15分，创建了比特币世界的第一个区块（block），这一天被称为“创世日”，而这个区块也被称为“创世块”。


## 区块链如何形成?

* **中心化的记账**

我在买东西的时候，首先要查看自己的卡里有没有足够的余额，已经买完之后还剩下多少，这就是记账。

**那我们目前的交易都由谁来记账呢？—— 银行**

无论你使用哪种支付方式，最后都是由银行来记账。而且，我们也很信任银行，因为在银行的背后是国家的信用体系。这就是中心化的记账系统。


* **去中心化的记账**

不在需要某一个专门的机构来记账，我们每一个人的账本都分享出去，让大家一起来记账


![](../../images/blockchain/blockchain-03.png)


在这个过程中，我们每一个人都对所有人广播交易的消息。因此，我们就可以得到如上图所示的账单，如果把这些账单打包起来，就是我们所说的**区块**。


这个区块打包完了之后，随着时间的推移，又有新的交易在发生，就会形成新的区块（下图 ），新的区块连接到我们之前的区块。这样，所有的账单就会形成一条信息链，即**区块链**。

![](../../images/blockchain/blockchain-04.png)


## 为什么记账？

你广播给我一条账单，我为啥要帮你记下来, 花自己的电脑资源帮你记账**有什么好处**？

![](../../images/blockchain/blockchain-10.jpeg)

在比特币系统中，记账是有奖励的。这个奖励主要分两种：

* 手续费

    微信提现，支付宝提现

* 打包奖励

协议规定，**每一个区块最终只能有一个人（节点）来打包，这个人会获得奖励。**

比特币系统中有这样一个方案：整个系统的账单，**每 10 分钟打一次包。**

最开始，给打包的人奖励 50 BTC，4 年之后，每打一个包就奖励 25 BTC ，再过 4 年就奖励 12.5 BTC 。也就是说，**每过 4 年奖励就会减半。**


因此我们可以算出**比特币的总数，一共是 2100w 个**。而比特币就是通过打包奖励这种方式让它扩散出去。

![](../../images/blockchain/blockchain-06.png)

![](../../images/blockchain/blockchain-05.jpg =300x200)

**8785 * 12.5 = $109812.5 = ￥768182** 


## 以谁为准？

现在大家都抢着去打包了，所以最终该给谁打包呢？

中本聪提出了一个解决方案：**工作量证明**。

这个所谓的工作量证明，我们可以简单理解为，做一个非常难的数学题，这个数学题难道什么地步？大概就是没有任何人能解出来，唯一的办法就是一个一个数去试。

**这个“解题”的过程就称之为，挖矿。**


## 挖矿原理

**哈希函数 sha256** 

```
sha256('abc') = 0000727854b50bb95c054b39c1fe5c92e5ebc...
```

比如说这样一个公式：

![](../../images/blockchain/blockchain-07.jpeg)

如果我告诉你，X = 1，你很快就可以知道 Y 等于多少。但是现在，我告诉你 Y = 238938248，请问 X 是多少？

**原理**

![](../../images/blockchain/blockchain-08.png  =600x200)

* 字符串 

    字符串 = 上一个块的头部 + 已经收集号的账单 + 区块链产生的世界戳 + 随机数

* hash 

    hash = sha256(sha256(字符串))

* 难度系数 

    假如生成的hash必须要求前面10位是0， 这个时候就需要不断的更新随机数
    ```
        000000000f727854b50bb95c054b39c1fe5c92e5ebcfa4bcb5dc279f56aa96a365e5a....
    ```
    如果满足这个要求 就算挖矿成功了， 每个人计算是不一样的，谁的计算能力更强就能更快的找到这个随机数

* 难度系数的动态调节

    就算采矿很难，但也没法保证，正好十分钟产出一个区块，有时一分钟就算出来了，有时几个小时可能也没结果。总体来看，随着硬件设备的提升，以及矿机的数量增长，计算速度一定会越来越快。

    为了将产出速率恒定在十分钟，中本聪还设计了难度系数的动态调节机制。他规定，难度系数每两周（2016个区块）调整一次。如果这两周里面，区块的平均生成速度是9分钟，就意味着比法定速度快了10%，因此难度系数就要调高10%；如果平均生成速度是11分钟，就意味着比法定速度慢了10%，因此难度系数就要调低10%。

    难度系数越调越高（目标值越来越小），导致了采矿越来越难。

![](../../images/blockchain/blockchain-09.png   =600x200)


## 身份认证


**电子签名**

![](../../images/blockchain/blockchain-11.png)

**使用流程**

![](../../images/blockchain/blockchain-12.png)


## 区块链的分叉
jhynybnhy
即使区块链是可靠的，现在还有一个问题没有解决：如果两个人同时向区块链写入数据，也就是说，同时有两个区块加入，因为它们都连着前一个区块，就形成了分叉。这时应该采纳哪一个区块呢？

![](../../images/blockchain/blockchain-13.jpg)

现在的规则是，新节点总是采用最长的那条区块链。如果区块链有分叉，将看哪个分支在分叉点后面，先达到6个新区块（称为"六次确认"）。按照10分钟一个区块计算，一小时就可以确认。

![](../../images/blockchain/blockchain-14.jpg)

由于新区块的生成速度由计算能力决定，所以这条规则就是说，拥有大多数计算能力的那条分支，就是正宗的比特链。


## 比特币和区块链是什么关系

区块链是比特币的底层技术，比特币相当于区块链技术的第一个应用。


## 相关链接
    

演示代码地址：https://github.com/anders94/blockchain-demo

第一集：https://weibo.com/tv/v/HgaNTlNgG?fid=1034:4338546413377740

第二集：https://weibo.com/tv/v/HgkzP4q2d?fid=1034:4338921413505538

http://www.ruanyifeng.com/blog/2017/12/blockchain-tutorial.html

http://latex.91maths.com/

https://juejin.im/post/5a5bfa806fb9a01ca91569f1